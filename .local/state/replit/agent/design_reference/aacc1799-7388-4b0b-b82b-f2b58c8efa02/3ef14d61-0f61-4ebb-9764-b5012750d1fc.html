<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automated Downtime Reporter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: {
                    'sans': ['Roboto', 'system-ui', 'sans-serif'],
                    'mono': ['Roboto Mono', 'monospace']
                },
                colors: {
                    'primary': '#1976D2',
                    'secondary': '#424242',
                    'surface': '#FFFFFF',
                    'background': '#F5F5F5'
                }
            }
        }
    };
    </script>
    <style>
        body {
            font-family: 'Roboto', system-ui, sans-serif;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
        }
        
        .table-responsive {
            overflow-x: auto;
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #1976D2;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-background min-h-screen">
    <!-- @COMPONENT: Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="text-center">
                <h1 class="text-4xl font-bold text-gray-900 mb-2">Automated Downtime Reporter</h1>
                <p class="text-lg text-gray-600">Comprehensive downtime analysis and channel-wise reporting</p>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: Header -->

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- @COMPONENT: DataInput [downtimeData, loading state] -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-8">
            <div class="mb-6">
                <h2 class="text-2xl font-semibold text-gray-900 mb-2">CSV Data Input</h2>
                <p class="text-gray-600">Paste your downtime data in CSV format. Include columns: Date, Title, Channel, Impacted_Service, Impact_Type, Modality, Start_Time, End_Time, Duration</p>
            </div>
            
            <div class="space-y-4">
                <textarea 
                    id="csvInput"
                    data-bind="downtimeData"
                    class="w-full h-48 p-4 border border-gray-300 rounded-lg font-mono text-sm resize-vertical focus:ring-2 focus:ring-primary focus:border-transparent"
                    placeholder="Date,Title,Channel,Impacted_Service,Impact_Type,Modality,Planned_Interruption,Start_Time,End_Time,Duration
8-Aug-25,Issue with Transfer Money,TRANSFER MONEY,Transfer Money and CCBP services,FULL,UNPLANNED,YES,11:00 PM,11:59 PM,00:59:00
6-Aug-25,Delayed response in Web Portals,WEB,Delayed response in portals,PARTIAL,UNPLANNED,NO,2:23 PM,2:26 PM,00:03:00
3-Aug-25,Full DFS System Down,APP,All Service,FULL,PLANNED,NO,12:10 AM,4:00 AM,03:50:00"
                    data-mock="true">Date,Title,Channel,Impacted_Service,Impact_Type,Modality,Planned_Interruption,Start_Time,End_Time,Duration
8-Aug-25,Issue with Transfer Money,TRANSFER MONEY,Transfer Money and CCBP services,FULL,UNPLANNED,YES,11:00 PM,11:59 PM,00:59:00
6-Aug-25,Delayed response in Web Portals,WEB,Delayed response in portals,PARTIAL,UNPLANNED,NO,2:23 PM,2:26 PM,00:03:00
3-Aug-25,Full DFS System Down,APP,All Service,FULL,PLANNED,NO,12:10 AM,4:00 AM,03:50:00
5-Aug-25,Mobile Recharge Issues,MOBILE RECHARGE,Mobile Recharge Service,PARTIAL,UNPLANNED,NO,9:15 AM,9:45 AM,00:30:00
7-Aug-25,Registration System Down,REGISTRATION,Registration Service,FULL,PLANNED,YES,2:00 AM,3:30 AM,01:30:00
9-Aug-25,Bill Payment Delays,BILL PAYMENT,Bill Payment Service,PARTIAL,UNPLANNED,NO,3:20 PM,3:35 PM,00:15:00</textarea>
                
                <button 
                    id="generateBtn"
                    data-event="click:handleGenerateReport"
                    class="w-full bg-primary hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 focus:ring-2 focus:ring-primary focus:ring-offset-2">
                    Generate Comprehensive Report
                </button>
                
                <div id="loadingState" class="hidden">
                    <div class="loading-spinner"></div>
                    <p class="text-center text-gray-600 mt-2">Processing downtime data...</p>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: DataInput -->

        <!-- @COMPONENT: ReportDashboard [reportData, chartData] -->
        <div id="reportSection" class="space-y-8 fade-in">
            <!-- Overall Summary Charts -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6">Overall Downtime Overview</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h3 class="text-lg font-medium text-gray-800 mb-4 text-center">Downtime by Modality</h3>
                        <div class="chart-container">
                            <canvas id="modalityChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h3 class="text-lg font-medium text-gray-800 mb-4 text-center">Downtime by Type (Minutes)</h3>
                        <div class="chart-container">
                            <canvas id="typeChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Channel-wise Breakdown Charts -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-2xl font-semibold text-gray-900 mb-6">Channel-wise Downtime Analysis</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Unplanned Partial -->
                    <div class="bg-red-50 rounded-lg p-4 border border-red-200">
                        <h3 class="text-lg font-medium text-red-800 mb-4 text-center">Unplanned Partial Downtime by Channel</h3>
                        <div class="chart-container">
                            <canvas id="unplannedPartialChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Unplanned Full -->
                    <div class="bg-orange-50 rounded-lg p-4 border border-orange-200">
                        <h3 class="text-lg font-medium text-orange-800 mb-4 text-center">Unplanned Full Downtime by Channel</h3>
                        <div class="chart-container">
                            <canvas id="unplannedFullChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Planned Full -->
                    <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                        <h3 class="text-lg font-medium text-blue-800 mb-4 text-center">Planned Full Downtime by Channel</h3>
                        <div class="chart-container">
                            <canvas id="plannedFullChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Planned Partial -->
                    <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                        <h3 class="text-lg font-medium text-green-800 mb-4 text-center">Planned Partial Downtime by Channel</h3>
                        <div class="chart-container">
                            <canvas id="plannedPartialChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary Statistics -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-red-500">
                    <div class="flex items-center">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-600">Unplanned Partial</p>
                            <p class="text-2xl font-bold text-red-600" data-bind="summary.unplannedPartial.duration">0:45:00</p>
                            <p class="text-sm text-gray-500" data-bind="summary.unplannedPartial.count">3 incidents</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-500">
                    <div class="flex items-center">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-600">Unplanned Full</p>
                            <p class="text-2xl font-bold text-orange-600" data-bind="summary.unplannedFull.duration">0:59:00</p>
                            <p class="text-sm text-gray-500" data-bind="summary.unplannedFull.count">1 incident</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-blue-500">
                    <div class="flex items-center">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-600">Planned Full</p>
                            <p class="text-2xl font-bold text-blue-600" data-bind="summary.plannedFull.duration">5:20:00</p>
                            <p class="text-sm text-gray-500" data-bind="summary.plannedFull.count">2 incidents</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-6 border-l-4 border-green-500">
                    <div class="flex items-center">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-600">Planned Partial</p>
                            <p class="text-2xl font-bold text-green-600" data-bind="summary.plannedPartial.duration">0:00:00</p>
                            <p class="text-sm text-gray-500" data-bind="summary.plannedPartial.count">0 incidents</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Data Tables -->
            <div class="space-y-6">
                <!-- Unplanned Partial Table -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="px-6 py-4 bg-red-50 border-b border-red-200">
                        <h3 class="text-lg font-semibold text-red-800">Unplanned Partial Downtime Incidents</h3>
                    </div>
                    <div class="table-responsive">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Channel</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Impacted Service</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Duration</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" data-mock="true">
                                <!-- @MAP: unplannedPartial.map(incident => ( -->
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" data-bind="incident.date">6-Aug-25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" data-bind="incident.title">Delayed response in Web Portals</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800" data-bind="incident.channel">WEB</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-900" data-bind="incident.impactedService">Delayed response in portals</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900" data-bind="incident.duration">00:03:00</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">5-Aug-25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Mobile Recharge Issues</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">MOBILE RECHARGE</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-900">Mobile Recharge Service</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900">00:30:00</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">9-Aug-25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Bill Payment Delays</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">BILL PAYMENT</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-900">Bill Payment Service</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900">00:12:00</td>
                                </tr>
                                <!-- @END_MAP )) -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Unplanned Full Table -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="px-6 py-4 bg-orange-50 border-b border-orange-200">
                        <h3 class="text-lg font-semibold text-orange-800">Unplanned Full Downtime Incidents</h3>
                    </div>
                    <div class="table-responsive">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Channel</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Impacted Service</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Duration</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" data-mock="true">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">8-Aug-25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Issue with Transfer Money</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">TRANSFER MONEY</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-900">Transfer Money and CCBP services</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900">00:59:00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Planned Full Table -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="px-6 py-4 bg-blue-50 border-b border-blue-200">
                        <h3 class="text-lg font-semibold text-blue-800">Planned Full Downtime Incidents</h3>
                    </div>
                    <div class="table-responsive">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Channel</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Impacted Service</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Duration</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" data-mock="true">
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">3-Aug-25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Full DFS System Down</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800">APP</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-900">All Service</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900">03:50:00</td>
                                </tr>
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">7-Aug-25</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">Registration System Down</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">REGISTRATION</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-900">Registration Service</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900">01:30:00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: ReportDashboard -->
    </div>

    <script>
        (function() {
            // Chart color schemes for different categories
            const channelColors = [
                '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
                '#FF9F40', '#FF6384', '#C9CBCF', '#4BC0C0', '#FF6384'
            ];

            // Initialize all charts
            function initializeCharts() {
                // Overall Modality Chart
                const modalityCtx = document.getElementById('modalityChart').getContext('2d');
                new Chart(modalityCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Unplanned', 'Planned'],
                        datasets: [{
                            data: [104, 320], // minutes
                            backgroundColor: ['#FF6384', '#36A2EB'],
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    usePointStyle: true
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = ((context.parsed / total) * 100).toFixed(1);
                                        return `${context.label}: ${context.parsed} min (${percentage}%)`;
                                    }
                                }
                            }
                        }
                    }
                });

                // Overall Type Chart
                const typeCtx = document.getElementById('typeChart').getContext('2d');
                new Chart(typeCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Unplanned Partial', 'Unplanned Full', 'Planned Full'],
                        datasets: [{
                            label: 'Downtime (minutes)',
                            data: [45, 59, 320],
                            backgroundColor: ['#FF6384', '#FF9F40', '#36A2EB'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Minutes'
                                }
                            }
                        }
                    }
                });

                // Unplanned Partial by Channel
                const unplannedPartialCtx = document.getElementById('unplannedPartialChart').getContext('2d');
                new Chart(unplannedPartialCtx, {
                    type: 'pie',
                    data: {
                        labels: ['WEB', 'MOBILE RECHARGE', 'BILL PAYMENT'],
                        datasets: [{
                            data: [3, 30, 12], // minutes
                            backgroundColor: channelColors.slice(0, 3),
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    usePointStyle: true,
                                    font: { size: 12 }
                                }
                            }
                        }
                    }
                });

                // Unplanned Full by Channel
                const unplannedFullCtx = document.getElementById('unplannedFullChart').getContext('2d');
                new Chart(unplannedFullCtx, {
                    type: 'pie',
                    data: {
                        labels: ['TRANSFER MONEY'],
                        datasets: [{
                            data: [59], // minutes
                            backgroundColor: ['#FF9F40'],
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    usePointStyle: true,
                                    font: { size: 12 }
                                }
                            }
                        }
                    }
                });

                // Planned Full by Channel
                const plannedFullCtx = document.getElementById('plannedFullChart').getContext('2d');
                new Chart(plannedFullCtx, {
                    type: 'pie',
                    data: {
                        labels: ['APP', 'REGISTRATION'],
                        datasets: [{
                            data: [230, 90], // minutes
                            backgroundColor: ['#36A2EB', '#FFCE56'],
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    usePointStyle: true,
                                    font: { size: 12 }
                                }
                            }
                        }
                    }
                });

                // Planned Partial by Channel (empty state)
                const plannedPartialCtx = document.getElementById('plannedPartialChart').getContext('2d');
                new Chart(plannedPartialCtx, {
                    type: 'pie',
                    data: {
                        labels: ['No Data'],
                        datasets: [{
                            data: [1],
                            backgroundColor: ['#E5E7EB'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: false
                            }
                        }
                    }
                });
            }

            // Simulate report generation
            function handleGenerateReport() {
                const loadingState = document.getElementById('loadingState');
                const generateBtn = document.getElementById('generateBtn');
                const reportSection = document.getElementById('reportSection');

                // Show loading state
                loadingState.classList.remove('hidden');
                generateBtn.disabled = true;
                generateBtn.textContent = 'Processing...';

                // TODO: Implement actual API call to backend
                // const response = await fetch('/api/report', { method: 'POST', body: formData });

                // Simulate processing time
                setTimeout(() => {
                    loadingState.classList.add('hidden');
                    generateBtn.disabled = false;
                    generateBtn.textContent = 'Generate Comprehensive Report';
                    
                    // Show report section
                    reportSection.style.display = 'block';
                    
                    // Initialize charts after DOM is visible
                    setTimeout(initializeCharts, 100);
                }, 2000);
            }

            // Event listeners
            document.getElementById('generateBtn').addEventListener('click', handleGenerateReport);

            // Initialize charts on page load if report is visible
            if (document.getElementById('reportSection').style.display !== 'none') {
                initializeCharts();
            }
        })();
    </script>
</body>
</html>